# ğŸ’Š **ì‚ë¦¿(Pill It) - ë³µìš©ì•½ ì•Œë¦¼, ì •ë³´ ê´€ë¦¬**

[![íˆíˆ](https://github.com/Jin0331/Pill-IT/assets/42958809/726199d4-52b4-4d23-b667-e619cd81c0f1)](https://apps.apple.com/kr/app/%EC%82%90%EB%A6%BF-pill-it-%EB%B3%B5%EC%9A%A9%EC%95%BD-%EC%95%8C%EB%A6%BC-%EC%A0%95%EB%B3%B4-%EA%B4%80%EB%A6%AC/id6479727658)

![PillItImageMerge](https://github.com/Jin0331/Pill-IT/assets/42958809/61ff75bb-22f8-4c07-8824-829048969cf0)


> ì¶œì‹œ ê¸°ê°„ : 2024.03.07 - 03.27 (ì•½ 3ì£¼)
>
> Release version : v1.0.5 (ì§€ì† ì—…ë°ì´íŠ¸ ì¤‘ ğŸš€)
>
> ê¸°íš/ë””ìì¸/ê°œë°œ 1ì¸ ê°œë°œ
>
> í”„ë¡œì íŠ¸ í™˜ê²½ - iPhone ì „ìš©(iOS 15.0+), ë¼ì´íŠ¸ ëª¨ë“œ ê³ ì •

---

<br>

## ğŸ”† **í•œì¤„ì†Œê°œ**

***ë•Œë§ì¶° ë‹¹ì‹ ì˜ ê±´ê°•ì„ ì±™ê²¨ì£¼ëŠ” ë¹ ë¦¿ë¹ ë¦¿í•œ ì•½ë³µìš© ë¹„ì„œ - ì‚ë¦¿(Pill It)***

<br>

## ğŸ”† **í•µì‹¬ ê¸°ëŠ¥**

* **ì˜ì•½í’ˆ ì •ë³´ ê²€ìƒ‰**

  * ì‹í’ˆì˜ì•½ì•ˆì „ì²˜(ì˜ì•½í’ˆ ì œí’ˆ í—ˆê°€ì •ë³´, ì˜ì•½í’ˆ ë‚±ì•Œì‹ë³„ ì •ë³´) API ì—°ë™ : êµ­ë‚´ì—ì„œ ì‹ ê³  ë° í—ˆê°€ëœ ì˜ì•½í’ˆ(ì „ë¬¸/ì¼ë°˜)ì— ëŒ€í•œ ì •ë³´ ê²€ìƒ‰

  * ì˜ì•½í’ˆ ìƒì„¸ ê²€ìƒ‰ ê¸°ë°˜ì˜ ë³µìš©ì•½ ë“±ë¡ : í’ˆëª©ëª…, ì—…ì²´ëª…, ì£¼ì„±ë¶„, ë¶„ë¥˜ëª… ë“±ì— ë”°ë¥¸ ìì‹ ì˜ ë³µìš©ì•½ì„ ì •í™•í•˜ê²Œ ë“±ë¡

  * ì˜ì•½í’ˆ ìƒì„¸ì •ë³´ ì œê³µ : ë³´í—˜(ë³´í—˜/ë¹„ë³´í—˜ ì—¬ë¶€), ì„±ë¶„í•¨ëŸ‰, íš¨ëŠ¥íš¨ê³¼, ìš©ë²•ìš©ëŸ‰, DUR ë“± í•´ë‹¹ ì˜ì•½í’ˆì— ëŒ€í•œ ìƒì„¸ì •ë³´ ì œê³µ

* **ë³µìš©ì•½ ë“±ë¡ ë° ì•Œë¦¼**

  * ë³µìš©ì•½ ì‚¬ì§„ ì„¤ì • : ì‹í’ˆì˜ì•½ì²˜, ì¹´ë©”ë¼ì´¬ì˜/ì•¨ë²”, ë„¤ì´ë²„ ì´ë¯¸ì§€ ê²€ìƒ‰ ê¸°ë°˜ì˜ ë³µìš©ì•½ ì‚¬ì§„ ì„¤ì •

  * ë³µìš©ì•½ ê·¸ë£¹ ì„¤ì • : ì‚¬ìš©ìì˜ ì˜ì•½í’ˆ ìš©ë„ì— ë”°ë¥¸ Nê°œ ì´ìƒì˜ ë³µìš©ì•½ì— ëŒ€í•œ ê·¸ë£¹ ì„¤ì •

  * ë³µìš©ì•½ ê·¸ë£¹ ì•Œë¦¼ ì„¤ì • : ì‚¬ìš©ìì˜ ë³µìš©ì•½ ì£¼ê¸°(ë§¤ì¼, íŠ¹ì •ìš”ì¼, ì¼/ì£¼/ì›” ê°„ê²©)ì— ë”°ë¥¸ ì„¸ë¶€ ì‹œê°„ ì„¤ì •

  * ë³µìš©ì•½ ê·¸ë£¹ ì•Œë¦¼ : ì‚¬ìš©ìê°€ ì§€ì •í•œ ì‹œê°„ì— ë“±ë¡ëœ ë³µìš©ì•½ ê·¸ë£¹ì— ëŒ€í•œ ì•Œë¦¼

<br>

## ğŸ”† **ì ìš© ê¸°ìˆ **

* ***í”„ë ˆì„ì›Œí¬***

  â€‹	UIKit

* ***ì•„í‚¤í…ì³***

  â€‹	MVVM

* ***ì˜¤í”ˆ ì†ŒìŠ¤***(Cocoapods)

  â€‹	Realm / RxSwift / Alamofire /	Kingfisher / UserNotifications

  â€‹ SearchTextField / Toast-Swift / NVActivityIndicatorView / SwipeableTabBarController / WHTabbar / Parchment / Tabman

* ***ë²„ì „ ê´€ë¦¬***

  â€‹	Git(Git-Flow ì ìš©) / Github

  <br>


## ğŸ”† **ì ìš© ê¸°ìˆ  ì†Œê°œ**

***MVVM***

* View ë° Business ë¡œì§ì„ ë¶„ë¦¬í•˜ê¸° ìœ„í•œ MVVM ì•„í‚¤í…ì²˜ë¥¼ ë„ì…

* Input-Output íŒ¨í„´ì˜ Protocolì„ ì±„íƒí•¨ìœ¼ë¡œì¨ User Interactionê³¼ View Data í•¸ë“¤ë§

    ```swift
    protocol ViewModelType {
        var disposeBag : DisposeBag { get }
        associatedtype Input
        associatedtype Output
        func transform(input : Input) -> Output
    }

    protocol CombineViewModelType : AnyObject, ObservableObject {
        associatedtype Input
        associatedtype Output
        
        var cancellables : Set<AnyCancellable> {get set}
        
        var input : Input {get set}
        var output : Output {get set}
        
        func transform()
    }
    ```


***Realm***

* Repository Pattern ê¸°ë°˜ì˜ ë°ì´í„° ë¡œì§ ì¶”ìƒí™”

* ì•„ë˜ì™€ ê°™ì€ Database Schema êµ¬ì„± (**1:N**)

  ![DatabaseSchema](https://github.com/Jin0331/Pill-IT/assets/42958809/d40541b6-5bde-4590-9b90-8f38b45556f3)

***Reactive Programming***

* ë¹„ë™ê¸° Eventì˜ ê´€ë¦¬ë¥¼ ìœ„í•œ Custom Observableê³¼ RxSwiftë¥¼ ì´ìš©í•œ Reactive Programming êµ¬í˜„

* Generic ê¸°ë°˜ì˜ Observable êµ¬í˜„

```swift
final class Observable<T> {
    
    private var closure : ((T) -> Void)?
    
    var value : T {
        didSet {
            closure?(value)
        }
    }
    
    init(_ text: T) {
        self.value = text
    }
    
    func bind(_ closure : @escaping (T) -> Void) {
        closure(value)
        self.closure = closure
    }
}

```

***Alamorfie***

* `URLRequestConvertible`ì„ í™œìš©í•œ `Router íŒ¨í„´` ê¸°ë°˜ì˜ `GET/POST/DEL/PUT` ë©”ì†Œë“œë¥¼ í™œìš©í•œ `RESTful API Network`ì™€ì˜ í†µì‹  êµ¬í˜„

* Error Handlingì„ ìœ„í•œ Result Type ì ìš©


***SearchTextField*** 

* User Interaction ê¸°ë°˜ì˜ userStoppedTypingHandler, itemSelectionHandler êµ¬í˜„ì„ í†µí•œ TextFieldì˜ Autocomplete ì ìš©

<p align="center">
 <img src="https://github.com/Jin0331/Pill-IT/assets/42958809/35fc427f-2924-4fc3-8679-1aa39cdac51d" width="20%" height="20%"/>
</p>

<br>

***SwipeableTabBarController, WHTabbar, Parchment, Tabman***

* ë‹¤ìˆ˜ì˜ UITabBarController ì—°ê´€ Open Sourceë¥¼ í™œìš©í•œ ì‚¬ìš©ì ì¹œí™”ì  UI êµ¬ì„±


<br>

## ğŸ”† íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### 1. Appì˜ Life-Cycleê³¼ Background Timerë¥¼ ì´ìš©í•œ ì˜¤ëŠ˜/ë‚´ì¼ ì•Œë¦¼ ë“±ë¡ì„ í†µí•œ Local Notification ì œí•œ ê·¹ë³µ

* **ë¬¸ì œ ìƒí™©**

  > â€‹	"iOS ë””ë°”ì´ìŠ¤ëŠ” ì•Œë¦¼ì„ ìµœì‹  64ê°œ ì•Œë¦¼ìœ¼ë¡œ ì œí•œ"í•œë‹¤. ê°œë°œ ê³¼ì •ì—ì„œ í•´ë‹¹ ì‚¬í•­ì„ ê³ ë ¤í•˜ì§€ ì•Šê³ , ë³µìš©ì•½ ì•Œë¦¼ì„ ë“±ë¡í•  ë•Œ ìƒì„±ë˜ëŠ” ëª¨ë“  Dateë¥¼ iOS ë””ë°”ì´ìŠ¤ì— ë“±ë¡í•˜ê²Œ ë˜ì–´ ì•Œë¦¼ì´ ì •ìƒì ìœ¼ë¡œ ë°œìƒí•˜ì§€ ì•ŠëŠ” ë¬¸ì œ ë°œìƒ
  >
  > â€‹	-> ë³µìš©ì•½ ì•Œë¦¼ë“±ë¡ì—ì„œ ì•Œë¦¼ ì£¼ê¸°ë¥¼ ë“±ë¡ì‹œê°„ 06:00ì‹œ ê¸°ì¤€ìœ¼ë¡œ "ë§¤ì¼(365ì¼) - 07:00, 12:00, 19:00"ë¡œ ì„¤ì •í•˜ëŠ” ê²½ìš°, 365 * 3 = 1095ê°œì˜ ì•Œë¦¼ì´ ìƒì„±ë¨.

* **í•´ê²° ë°©ë²•**

  1. ``Local Notification``ì„ ê´€ë¦¬í•˜ëŠ” ``RefreshManager ìƒì„± (Singleton Pattern)``

  2. ``sceneDidBecomeActive`` (ì•±ì´ Terminated ëœ í›„ ë‹¤ì‹œ ì‹¤í–‰ë˜ì—ˆì„ ë•Œ)

      PillAlarmDate Tableë¡œë¶€í„° ``D-1,D+0,D+1 Date``ì— í•´ë‹¹í•˜ëŠ” ì•Œë¦¼ ëª©ë¡ Fetchí•˜ê³  ``Local Notification``ì„ ë“±ë¡í•˜ëŠ” í•¨ìˆ˜(RefreshManager.shared.resetNotificationAction) ì‹¤í–‰

        â€‹	-> ì•±ì´ Active ë ë•Œë§ˆë‹¤ ì‹¤í–‰ë˜ë¯€ë¡œ, ``UserDefaultë¥¼ í™œìš©í•˜ì—¬ D+0ì—ì„œ ìµœì´ˆ 1ë²ˆ ì‹¤í–‰``í•œ ê²½ìš°ì—ëŠ” ì´í›„ ë¶€í„° ì‹¤í–‰ë˜ì§€ ì•ŠìŒ

        â€‹	-> ì•±ì´ sceneDidDisconnect ëœ ê²½ìš° ì•Œë¦¼ì´ ì œëŒ€ë¡œ ë™ì‘í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ, ì‚¬ìš©ìê°€ ë‹¤ì‹œ ì•±ì„ ì‹¤í–‰í•  ìˆ˜ ìˆë„ë¡ Local Notificationìœ¼ë¡œ ìœ ë„

  3. ``sceneDidEnterBackground`` (ì•±ì´ Backgroundë¡œ ì „í™˜ë˜ì—ˆì„ ë•Œ)

      Background -> Foreground ìƒíƒœë¡œ ì „í™˜ì‹œ, ìµœì‹  Local Notificationì„ ë“±ë¡í•  ìˆ˜ ìˆë„ë¡ Timer ì‚¬ìš©

<br>

### 2. Realm Tableì˜ isDeleted Attribute ì¶”ê°€ë¥¼ í†µí•œ, Realmê³¼ Diffable Datasourceê°€ ì—°ê²° ë˜ì—ˆì„ ë•Œ ì‚­ì œì‹œ Snapshot ë¬¸ì œ ê·¹ë³µ

* **ë¬¸ì œ ìƒí™©**

  >  DiffableDataSourceì—ì„œëŠ” Diffì„ ìœ„í•´ ì‚­ì œëœ ê°ì²´ë¥¼ ë“¤ê³ ìˆì–´ì•¼ í•˜ëŠ”ë°, Realmì€ ë°ì´í„°ê°€ ì‚­ì œë˜ëŠ” ìˆœê°„ í•´ë‹¹ ë°ì´í„°ì— ì ‘ê·¼í•  ìˆ˜ ì—†ìœ¼ë¯€ë¡œ "Terminating app due to uncaught exception 'RLMException', reason: 'Object has been deleted or invalidated.'" ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤.

  ![img](https://blog.kakaocdn.net/dn/yJLGU/btruZPt9FBL/F7mZcbyjuNzpOl4ZF5CYN0/img.png)

* **í•´ê²° ë°©ë²•**

  1. Realm Tableì—ì„œ ì„ì˜ì˜ Attributeì¸ Bool íƒ€ì…ì˜ isDeleted ìƒì„± í›„ í•´ë‹¹ Recordì˜ Deleteê°€ ë°œìƒí•  ë•Œ, Realm Tableì—ì„œ ì‹¤ì œë¡œ ì‚­ì œë˜ëŠ” ê²ƒì´ ì•„ë‹ˆê³  isDeletedì— ``true`` ë¶€ì—¬
  2. ë˜í•œ, Realm Tableì—ì„œ ì‹¤ì œ ì‚­ì œê°€ ë˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¯€ë¡œ, ì•±ì´ ``sceneDidDisconnect`` ë˜ëŠ” ``sceneDidEnterBackground`` ìƒíƒœë¡œ ë³€ê²½ë  ë•Œ Delete ë˜ë„ë¡ í•¨
